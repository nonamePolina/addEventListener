<input type='button' id='click-me' value='click me'>
<script>

    class publisher {

        _triggerEvent(eventName) {
            if (!!this.listeners) {
                this.listeners = {};
            }

            let array = this.listeners[eventName];
            if (!!array) {
                array.forEach(function (callback) {
                    callback();
                });
            }
        }

        addEventListener(eventName, listener) {
            if (!this.listeners) {
                this.listeners = {};
            }
            if (!this.listeners[eventName]) {
                this.listeners[eventName] = {};
            }
            this.listeners[eventName].push(listener)
        }
    }

        class Car extends Publisher {

            constructor() {
                super();
                this.speed = 0;
            }

            start() {
                this.speed = 100;

                this._triggerEvent("start");

                setTimeout(() => {
                    this._triggerEvent("speedoverflow")
                }, 1000);

                setTimeout(this._stop.bind(this), 2000);

                setTimeout(() => {
                    this._triggerEvent("speedoverflow")
                }, 3000);
            }

            _stop() {
                this.speed = 0;
                this._triggerEvent("stop");
            }


    }

            class TurboCar extends Car {
                _stop() {
                    console.log("I am never stop")
                }
            }

    class Cat extends Publisher {

        constructor() {
            super();
            setTimeout(() => {
                this._triggerEvent("eat");
            }, 1000)
        }
    }



    const cat = new Cat();
    cat.addEventListener("eat", () => {
        alert('want eat');
    });



    const mers = new Car();
    //const mers = new TurboCar();
    //
    // mers.addEventListener('stop', () => {
    //         alert('I am Misha and I know the car has stopped');
    //         console.log(mers.speed);
    //     });
    //
    // mers.addEventListener('stop', () => {
    //         alert('I am Dimych and I know the car has stopped');
    //         console.log(mers.speed);
    //     });
    //
    // mers.addEventListener('start', () => {
    //         alert('car started');
    //         console.log(mers.speed);
    //     });
    //
    // mers.addEventListener('speedoverflow', () => {
    //         alert('speed overflow');
    //         console.log(mers.speed);
    //     });
    //
    //     mers.addEventListener('speedoverflow', () => {
    //         alert('speed overflow');
    //         console.log(mers.speed);
    //     });
    //
    // mers.start();

</script>
